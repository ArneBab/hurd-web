# <a name="Table_of_Contents"> Table of Contents </a>

%TOC%

# <a name="Introduction"> Introduction </a>

This page is a simple project page for me. I use it to keep track of things concerning the Hurd. If you wish to comment on my lack of progress/life the do so in [[TWiki/GoodStyle]], preferable at the bottom of this topic.

# <a name="Current_Project"> Current Project </a>

I am currently working on updating the OSKit's Linux drivers. The OSKit is currently at Linux version 2.2.12 for most of the drivers. My objective is to upgrade from 2.2.12 to 2.2.21 plus the ATA-100 patches for Linux 2.2.19.

What motivates me the most is my Promise ATA-100 controller. It prevents me from running the Hurd on my SMP machine. (Even though I now have rigged another machine for my testing efforts ...)

## <a name="Update_OSKit_Linux_drivers"> </a> Update OSKit Linux drivers

I have forked. I will now work on two paths:

1. Patch ALL Linux drivers, patch by patch, from 2.2.12 to 2.2.13 etc. up to 2.2.21
2. Continue my work on patching only the IDE stuff.

### <a name="Plan_A_Update_all_Linux_drivers"> Plan A -- Update all Linux drivers </a>

The stock Linux drivers in the OSKit is at version 2.2.12. Therefore the first patch to the OSKit contains patches to bring it up to 2.2.13, hence the name.

The first patch also contains some other OSKit patches. I will soon add comments about them here (or elsewhere and link it to here). The patches are **NOT** incremental!

NOTE! New drivers added in regular Linux patches are **NOT** added to the OSKit in this round. The updates are masked against the Linux drivers already present in the latest release of the OSKit. When I have reached the first goal of upgrading to 2.2.21 I might start adding support for various NIC's, and other hardware I am able to test on.

<table border="1" cellpadding="1" cellspacing="0">
  <tr>
    <th bgcolor="#99CCCC"><strong>Part</strong></th>
    <th bgcolor="#99CCCC"><strong>Brief description</strong></th>
    <th bgcolor="#99CCCC"><strong>DIFF</strong></th>
    <th bgcolor="#99CCCC"><strong>Date</strong></th>
  </tr>
  <tr>
    <td> 2.2.13 </td>
    <td> Upgrade from Linux 2.2.12 to 2.2.13 </td>
    <td><a href="http://gnufans.org/joachim/hurd/patch-oskit-linux-2.2.13.diff.gz" target="_top">patch-oskit-linux-2.2.13.diff.gz</a></td>
    <td> Oct 27, 2002 </td>
  </tr>
  <tr>
    <td> 2.2.14 </td>
    <td> Upgrade from Linux 2.2.12 to 2.2.14 </td>
    <td><a href="http://gnufans.org/joachim/hurd/patch-oskit-linux-2.2.14.diff.gz" target="_top">patch-oskit-linux-2.2.14.diff.gz</a></td>
    <td> Oct 30, 2002 </td>
  </tr>
  <tr>
    <td> 2.2.15 </td>
    <td> Upgrade from Linux 2.2.12 to 2.2.15 </td>
    <td><a href="http://gnufans.org/joachim/hurd/patch-oskit-linux-2.2.15.diff.gz" target="_top">patch-oskit-linux-2.2.15.diff.gz</a></td>
    <td> Oct 31, 2002 </td>
  </tr>
</table>

Testing against [[Mach/OskitMach]] is currently a real hassle. Fortunately I've found an older **stable** oskit-mach (before Roland messed up the GDT's) sitting in an old directory - dated June 2002. (Don't get me started on stable tags on the CVS and the likes!)

### <a name="Plan_B_Update_only_IDE_stuff"> </a> Plan B -- Update only IDE stuff

Plan B has reached much further than Plan A. With the only difference being that it currently doesn't work. When building against a stable [[Mach/OskitMach]] and then testing it on my standard PII-system the boot goes fine up till the part when partition detection starts. Then the system is automatically rebooted. I have started debugging it but I have no definitive results yet.

1. Start off with OSKit, St. Patrick's Day release.
2. Upgrade the Linux IDE drivers to Linux 2.2.19, and 2.2.21
3. Test against HEAD branch of gnumach (oskit-mach)
4. Import the ATA-100 patch.
5. Test again.
6. Release fat patch.

<table border="1" cellpadding="1" cellspacing="0">
  <tr>
    <th bgcolor="#99CCCC"><strong>Part</strong></th>
    <th bgcolor="#99CCCC"><strong>Brief description</strong></th>
    <th bgcolor="#99CCCC"><strong>DIFF</strong></th>
    <th bgcolor="#99CCCC"><strong>Date</strong></th>
  </tr>
  <tr>
    <td> I </td>
    <td><a href="http://vmlinux.org/joachim/hurd/oskit-2002-partI.php" target="_top">Upgrade IDE drivers</a></td>
    <td><a href="http://vmlinux.org/joachim/hurd/oskit-2002-partI.tgz" target="_top">TGZ</a></td>
    <td> May 4, 2002 </td>
  </tr>
  <tr>
    <td> II </td>
    <td> Import ATA-100 patches: PDC20267 HPT366. </td>
    <td align="center"> -- </td>
    <td align="center"> -- </td>
  </tr>
  <tr>
    <td> III </td>
    <td> Upgrade to Linux 2.2.21 of IDE drivers. </td>
    <td align="center"> -- </td>
    <td align="center"> -- </td>
  </tr>
  <tr>
    <td> IV </td>
    <td> Upgrade rest of ATA-100 drivers. </td>
    <td align="center"> -- </td>
    <td align="center"> -- </td>
  </tr>
  <tr>
    <td> V </td>
    <td> Upgrade ISA NIC's. </td>
    <td align="center"> -- </td>
    <td align="center"> -- </td>
  </tr>
  <tr>
    <td> VI </td>
    <td> Upgrade rest of drivers. </td>
    <td align="center"> -- </td>
    <td align="center"> -- </td>
  </tr>
</table>

## <a name="Accessing_GNU_CVS"> </a> Accessing GNU CVS

    export CVSROOT=":pserver:anoncvs@anoncvs.gnu.org:/cvsroot/hurd"

## <a name="OSKit_Mach_Troubles"> </a> OSKit-Mach Troubles

* Building OSKit &amp; Mach and optimizations, context SMP: <http://lists.debian.org/debian-hurd/2002/debian-hurd-200203/msg00080.html>
* OSKit \_\_libc\_multiple\_libcs: <ftp://flux.cs.utah.edu/flux/oskit/mail/html/oskit-users/msg01052.html>
* Enabling OSKit drivers in Mach: <http://lists.debian.org/debian-hurd/2000/debian-hurd-200003/msg00265.html>
* IDE Bios probe trap on page zero problem: <http://mail.gnu.org/pipermail/bug-hurd/2001-July/004714.html>

* Neal announces oskit-mach binary: <http://lists.debian.org/debian-hurd/2000/debian-hurd-200009/msg00323.html>
* Neal crashes with OSKit 200009 on 0x104: <http://mail.gnu.org/pipermail/bug-hurd/2000-September/000055.html>
* Igor crashes on 0x104: <http://mail.gnu.org/pipermail/bug-hurd/2001-July/004714.html>

# <a name="Future_Work"> Future Work </a>

1. Enable [[FreeBSD]] drivers from OSKit in Mach. Checked that, does not work easily since the [[FreeBSD]] PCI related drivers are initialized from the [[FreeBSD]] PCI probe. OSKit-Mach uses the Linux PCI stuff and hence it would not be done easily.
2. Use the sound drivers in the OSKit -- port a useful sound daemon.
3. I want to get SMP working with OSKit-mach.

# <a name="Links"> Links </a>

Misc. links for my pleasure only.

* [Savannah - GNU CVS](http://savannah.gnu.org)
* [Gnu/Hurd](http://hurd.gnu.org)
* [OSKit-mach docs](http://www.etherhogz.org/doc/)
* "Building OSKit-Mach" the document: <http://mail.gnu.org/pipermail/bug-hurd/2001-September/005266.html>
* [Walken Hurd hackers guide](http://www.via.ecp.fr/~walken/hurd/) [(mirror)](http://vmlinux.org/crash/mirror/www.via.ecp.fr/)
* [CMU CS Mach pages](http://www.cs.cmu.edu/afs/cs.cmu.edu/project/mach/public/www/mach.html)
* [Univ. of Utah's Mach 4](http://www.cs.utah.edu/projects/flux/mach4/html/)
* OSKit [HTML](http://www.cs.utah.edu/flux/oskit/html/oskit-www.html) or [PS.GZ](http://vmlinux.org/joachim/hurd/oskit.ps.gz) manual.

Mach docs

* wget -m -np <ftp://ftp.inf.tu-dresden.de/pub/os/mach/> (nearly 250M)
* wget -m -np <ftp://ftp.lip6.fr/pub/mach/> (nearly 2G (e.g. includes oskit))
* wget -m -np <ftp://ftp.opengroup.org/pub/ri/os/> (About 20-30M)
* <ftp://ftp.ftp.lip6.fr/pub/mach/cmu/doc/osf/>

----

# <a name="Comments"> Comments </a>

----

 Click here to [edit](http://hurd.gnufans.orghttp://LOCATIONHurd/JoachimNilssonHurdPage) this page. <br /> -- [[Main/JoachimNilsson]] - 30 Okt 2002
