If you are coming from a version earlier than the 01 May 2000 production release, please see [[TWikiUpgradeTo01May2000]] first.

The current release has these changes that affect the upgrade of the 01 May 2000 version:

* Improved search, i.e. search multiple webs.
* The `changes` script has been retired (related to new search).
* Reorganization of topics: The TWiki.Main web was split up into TWiki.Main and TWiki.TWiki web.

These are the steps you need to perform to upgrade the 01 May 2000 version to this release: [ We assume `export TWIKIROOT=/some/dir/` ]

* Unpack the beta zip file into some working directory: <br />`mkdir -p ~/tmp/`<br />`cd ~/tmp`<br />`unzip ~/TWiki20001105.zip`

* **_Upgrade the TWiki document files_** ( `twiki` )
  * Move the document files to your TWiki root, i.e. <br />`mv ~/tmp/TWiki*.html $TWIKIROOT`<br />`mv ~/tmp/readme.txt $TWIKIROOT`

* **_Upgrade cgi-bin scripts_** ( `twiki/bin` )
  * Rename your original `twiki/bin` directory, i.e. <br />`mv $TWIKIROOT/bin $TWIKIROOT/bin.old`
  * Move the new scripts to your original `twiki/bin` location, i.e. <br />`mv ~/tmp/bin $TWIKIROOT/bin`
  * Merge the changes in your current `wikicfg.pm` into the new `wikicfg.pm`. We suggest using `diff -c` to compared the two files if you have made heavy changes to the file, i.e. <br />`diff -c $TWIKIROOT/bin.old/wikicfg.pm $TWIKIROOT/bin/wikicfg.pm | less`
  * Restore any additional scripts you might have from the old directory, i.e. <br />`mv $TWIKIROOT/bin.old/somescript $TWIKIROOT/bin/`<br /> (Note that the `changes` script is obsolete.)
  * In case you have basic authentication:
    * The `TWikiRegistration` topic moved from the TWiki.Main web to the TWiki.TWiki web. Change `.htaccess` to reflect the new location, i.e. <br />`ErrorDocument 401 /cgi-bin/view/TWiki/TWikiRegistration`
  * Pay attention to the file and directory permissions (security issue)
  * Test your TWiki installation if you can view topics. (Ignore the <code>%HTTP\_EQUIV\_ON\_VIEW%</code> you see on top of the topic, this will disappear after upgrading the template files.

* **_Upgrade templates files_** ( `twiki/templates` )
  * Rename your original `twiki/templates` directory, i.e. <br />`mv $TWIKIROOT/templates $TWIKIROOT/templates.old`
  * Move the new templates to your original `twiki/templates` location, i.e. <br />`mv ~/tmp/templates $TWIKIROOT/templates`
  * Merge the changes in your current template files into the new template files. To compare two files use <br />`diff -c $TWIKIROOT/templates.old/view.tmpl $TWIKIROOT/templates/view.tmpl | less`
  * Restore any additional template subdirectories of your TWiki webs you might have and merge the changes.
  * Test your TWiki installation if you can view topics.

* **_Upgrade public files_** ( `twiki/pub` )
  * Move the new `twiki/pub/TWiki` directory to your installation, i.e. <br />`mv ~/tmp/pub/TWiki $TWIKIROOT/pub/`
  * Pay attention to the file permissions of the `TWiki` directory and its subdirectory and files. The files must be writable by the cgi-scripts (usually user "nobody")

* **_Upgrade data files_** ( `twiki/data` )
  * Move the new `twiki/data/TWiki` directory to your installation, i.e. <br />`mv ~/tmp/data/TWiki $TWIKIROOT/data/`
  * Pay attention to the file permissions of the `TWiki` directory and its files. The files must be writable by the cgi-scripts (usually user "nobody")
  * The following topics are new and most be copied to all of your TWiki webs: `WebChanges`, `WebIndex`. <br />`cp -p $TWIKIROOT/data/TWiki/WebChanges.txt* $TWIKIROOT/data/Main`<br />`cp -p $TWIKIROOT/data/TWiki/WebIndex.txt* $TWIKIROOT/data/Main`<br /> Repeat this for all your webs. Pay attention to the file permissions.
  * `TWikiRegistration` moved from TWiki.Main to TWiki.TWiki. In case you customized `TWikiRegistration` , merge your changes back into `TWiki.TWikiRegistration` , then delete `$TWIKIROOT/data/Main/TWikiRegistration*`.
  * `TWikiPreferences` moved from TWiki.Main to TWiki.TWiki. Merge your changes to `TWikiPreferences` into `TWiki.TWikiPreferences`, then delete `$TWIKIROOT/data/Main/TWikiPreferences*`.
  * Modify the `WebPreferences` topics in all your webs to reflect the following:
    * `WEBTOPICLIST` should use `WebChanges` for `"Changes"`, and `WebIndex` for `"Index"`, i.e. <br />`| <a href="WebChanges">Changes</a>`<br />`| <a href="WebIndex">Index</a>`
    * In case you want to exclude a web from a `web="all"` search: Set this new preference <br />`Set NOSEARCHALL = on`
  * The `WebSearch` topic has considerable changes. Copy the one from `TWiki.TWiki` into all webs, or merge them if you made changes. To copy, do an edit-copy-edit-paste operation.
  * Change the `WebHome` topics in all your webs to reflect these changes:
    1. The "Changes" link should point to `WebChanges`.
    2. The "Topic index" link should point to `WebIndex`.
    3. Change the include of the web table to <code>%INCLUDE\{"TWiki.TWikiWebsTable"\}%</code>
  * Merge your `TWikiWebsTable` topic in TWiki.Main with the `TWikiWebsTable` topic in TWiki.TWiki. Note the new variable to query the color of a web. Delete the old `TWikiWebsTable` topic in TWiki.Main after merge is complete.
  * The following topics in the TWiki.Main web are depreciated (because they moved to TWiki.TWiki), but still need to be present in TWiki.Main because of existing links to these topics: `FileAttachment`, `TWikiDocumentation`, `TWikiHistory`, `TWikiPreferences`, `TWikiVariables`. <br /> It is recommended to edit these topics in TWiki.Main and replace the content with this line: <br /><code>This topic moved to %TWIKIWEB%.%TOPIC% in the %WIKITOOLNAME%.%TWIKIWEB% web.</code>
  * The following topics in the TWiki.Main web are obsolete and can be deleted: `BillClinton`, `GoodStyle`, `RegularExpression`, `TextFormattingFAQ`, `TextFormattingRules`, `TWikiAdministration`, `TWikiCategoryTable`, `TWikiEnhancementRequests`, `TWikiImplementationNotes`, `TWikiInstallationNotes`, `TWikiNotificationOfChanges`, `TWikiPlannedFeatures`, `TWikiUpgradeTo01May2000`, `TWikiUsernameVsLoginUsername`, `TWikiWeb`, `WelcomeGuest`, `WelcomeVisitor`, `WikiName`, `WikiNotation`, `WikiTopic`, `WikiWikiClones`. Sample delete command: <br />`rm -f $TWIKIROOT/data/Main/BillClinton.*`
  * In all your webs, change references to topics that moved to the TWiki.TWiki web:
    * Change topics: `TWikiUsers` , `WebNotify` , `WebHome`
    * With links to: `TWikiPreferences` , `TWikiVariables` , `TWikiUsers` , `TWikiWebsTable` and `WelcomeGuest`

* **_TWiki Access Control_**
  * Read [[TWikiAccessControl]] in case you want to use the new authorization feature based on groups.

* **_Known Issues_**
  * Check <http://TWiki.SourceForge.net/cgi-bin/view/Codev/KnownIssuesOfTWiki05Nov2000> for known issues of TWiki 05 Nov 2000 (production release)

-- [[Main/PeterThoeny]] - 03 Nov 2000 <br />
