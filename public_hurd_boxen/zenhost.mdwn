[[!meta copyright="Copyright Â© 2009 Free Software Foundation, Inc."]]

[[!meta license="""[[!toggle id="license" text="GFDL 1.2+"]][[!toggleable
id="license" text="Permission is granted to copy, distribute and/or modify this
document under the terms of the GNU Free Documentation License, Version 1.2 or
any later version published by the Free Software Foundation; with no Invariant
Sections, no Front-Cover Texts, and no Back-Cover Texts.  A copy of the license
is included in the section entitled [[GNU Free Documentation
License|/fdl]]."]]"""]]

*zenhost* is a Xen dom0 (hosted by [[bddebian]]) which is hosting several domUs
(see the table on [[public hurd boxen]] for a list).


[[!inline pages=public_hurd_boxen/xen_handling feeds=no]]


# Installing

  * Enable loggin with screen (`C-a H`).

  * lvcreate ...

  * ~tschwinge/machines/MACHINE

  * ~tschwinge/install_system

      * MACHINE

      * /dev/zenhost/...-root

  * /etc/xen/MACHINE

  * xm create -c MACHINE

      * /install

      * If needed:

          * cd /dev/ && ./MAKEDEV hd2

          * mkdir /media/data && settrans /media/data /hurd/ext2fs /dev/hd2

          * rmdir /home && ln -s media/data/home /

      * If needed: restore (parts of) some files

          * /etc/fstab

          * /etc/{passwd,shadow,group,gshadow}

              * adduser ... sudo

              * passwd root

          * /etc/ssh/ssh_host_*key*

            Can do this here or have to move after install_packages due to the
            files being overwritten again (don't think so)?

      * syncfs -s; halt

  * xm create -c MACHINE

      * /install_packages

## TODO

### crosshurd

    I: Extracting /var/cache/apt/archives/dash_0.5.5.1-3_hurd-i386.deb...
    tar: ./bin/sh: Cannot create symlink to `dash': File exists
    tar: ./usr/share/man/man1/sh.1.gz: Cannot create symlink to `dash.1.gz': File exists
    tar: Exiting with failure status due to previous errors

Ignore?

### /install

    Unpacking debconf (from .../debconf_1.5.28_all.deb) ...
    + debconf-set-selections
    warning: Unknown type error, skipping line 7

Fix.

    Configuring dash
    ----------------
    
    The system shell is the default command interpreter for shell scripts.
    
    Using dash as the system shell will improve the system's overall performance. It
    does not alter the shell presented to interactive users.
    
    Use dash as the default system shell (/bin/sh)? yes

Automate.

    Configuring libpam-runtime
    --------------------------
    
    Pluggable Authentication Modules (PAM) determine how authentication, 
    authorization, and password changing are handled on the system, as well as 
    allowing configuration of additional actions to take when starting user 
    sessions.
    
    Some PAM module packages provide profiles that can be used to automatically 
    adjust the behavior of all PAM-using applications on the system.  Please 
    indicate which of these behaviors you wish to enable.
    
      1. Unix authentication
    
    (Enter the items you want to select, separated by spaces.)
    
    PAM profiles to enable: 1

Automate.

     +---------------------------Configuring grub-pc------------------------------+

Add grub*- somewhere.

      +---------------------ca-certificates configuration------------------------+
      | Trust new certificates from certificate authorities?                     |

Used to be configured later -- move seeding forward.
