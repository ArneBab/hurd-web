#!/bin/sh

# Render the pages of this repository for your local browsing pleasure.

# We use ``--no-usedirs'' here, because when browsing local files, the web
# browsers don't display `index.html' files by default when a hyperlink
# referencing a directory is being opened.

# Written by Thomas Schwinge <tschwinge@gnu.org>


src=$(dirname "$0") &&
# Invoking ikiwiki with ``src=.'' will make it render `.git/' as well.
case $src in
  .*) src=$(cd "$src" && pwd);;
  *) :;;
esac &&
dest=$src.rendered &&

ikiwiki \
  --verbose \
  --wikiname GNU\ Hurd\ wiki \
  --templatedir "$src"/.templates \
  --userdir user \
  --no-usedirs \
  --plugin favicon \
  --plugin goodstuff \
  --plugin html \
  --plugin sidebar \
  --plugin table \
  --libdir "$src"/.library \
  --plugin license \
  ${1+"$@"} \
  "$src" "$dest" &&

echo &&
echo Now\ open\ \`"$dest"/index.html\'' to browse the wiki pages.'
