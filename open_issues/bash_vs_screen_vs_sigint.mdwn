[[!meta copyright="Copyright Â© 2009 Free Software Foundation, Inc."]]

[[!meta license="""[[!toggle id="license" text="GFDL 1.2+"]][[!toggleable
id="license" text="Permission is granted to copy, distribute and/or modify this
document under the terms of the GNU Free Documentation License, Version 1.2 or
any later version published by the Free Software Foundation; with no Invariant
Sections, no Front-Cover Texts, and no Back-Cover Texts.  A copy of the license
is included in the section entitled [[GNU Free Documentation
License|/fdl]]."]]"""]]

[[!tag open_issue_porting]]

Typing `C-c` (*SIGINT*), different versions of *bash* and *screen* respond like
this:

  * GNU/Linux; Ubuntu package 3.2-5 / `$BASH_VERSION` is `3.2.48(1)-release`
      * plain
          * shell prompt: new line / prompt printed; `$?` is 1.
          * `sleep 10` running: `^C` printed; SIGINT is sent; `$?` is 130.
      * in a *screen* session (Ubuntu package 4.0.3-11ubuntu4): exactly the same.

  * GNU/Hurd; Debian package 3.2-6+b1 (equals 3.2-6) / `$BASH_VERSION` is `3.2.48(1)-release`; *libc0.3* Debian package 2.9-25
      * plain
          * shell prompt: new line / prompt printed; `$?` is 1.
          * `sleep 10` running: `^C` printed; SIGINT is sent; `$?` is 130.
      * in a *screen* session (Debian package 4.0.3-11): exactly the same.
    
    This is equivalent to the GNU/Linux behavior.

  * GNU/Hurd; Debian package 4.0-4 / `$BASH_VERSION` is `4.0.28(1)-release`; *libc0.3* Debian package 2.9-25
      * plain
          * shell prompt: `^C`, then new line, then **`-bash: echo: write error: (ipc/mig) wrong reply message ID`**, then new line / prompt printed; `$?` is 128.
          * `sleep 10` running: `^C` printed, SIGINT is sent; `$?` is 130.
      * in a *screen* session (Debian package 4.0.3-11)
          * shell prompt: `^C`, then new line / prompt printed; `$?` is 128.
          * `sleep 10` running: `^C` printed; SIGINT is sent; `$?` is 130.
    
    This differs from the behavior of the earlier *bash* version in the MIG reply
    error in the not-*screen* case.  The difference in command-line editing
    mode, the displaying of `^C` (same on GNU/Linux), and / or the value 128
    for `$?` (same on GNU/Linux) is a bash 4.0 regression that has been fixed
    for 4.1 already:
    <http://lists.gnu.org/archive/html/bug-bash/2009-10/msg00040.html>.

  * GNU/Hurd; Debian package 4.0-7 / `$BASH_VERSION` is `4.0.33(1)-release`; *libc0.3* Debian packages 2.9-19, 2.9-25, 2.9-27
      * plain
          * shell prompt: `^C`, then new line, then **`-bash: echo: write error: (ipc/mig) wrong reply message ID`**, then new line / prompt printed; `$?` is 128.
          * `sleep 10` running: `^C` printed; SIGINT is sent; `$?` is 130.
      * in a *screen* session (Debian package 4.0.3-11)
          * shell prompt: `^C`, then new line / prompt printed; `$?` is 128.
          * `sleep 10` running: `^C` printed; SIGINT is sent; `$?` is 130.
    
    This is equivalent to the *bash* 4.0-4 / 4.0.28(1) behavior.

  * GNU/Hurd; Debian package 4.0-7 / `$BASH_VERSION` is `4.0.33(1)-release`; *libc0.3* Debian package 2.9-27
      * plain
          * shell prompt: `^C`, then new line, then **`-bash: echo: write error: (ipc/mig) wrong reply message ID`**, then new line / prompt printed; `$?` is 128.
          * `sleep 10` running: `^C` printed; SIGINT is sent; `$?` is 130.
      * in a *screen* session (Debian package 4.0.3-14)
          * shell prompt: **no reaction (nothing printed)**; `$?` thus is **unchanged**.
          * `sleep 10` running: **`^C` printed**, SIGINT is **not** sent.
    
    The *screen* behavior differs -- [[!debbug 522689#38]].


To sum up:

  * <strike>*screen*: new package causes that invokee doesn't react to `C-c` anymore.</strike>

  * *bash*: 4.0 packages have the MIG reply error.

    After having noticed that this error doesn't occur if starting *bash* with
    `--norc`, I isolated it to the following command in `.bashrc`:
    
        case $TERM in
          xterm* | rxvt*)
            PROMPT_COMMAND='echo -ne "\033]0;${USER}@${HOSTNAME}:${PWD}\007"';;
        esac

    ... and indeed:

        tschwinge@flubber:~ $ echo "$TERM" -- "$PROMPT_COMMAND"
        xterm -- echo -ne "\033]0;${USER}@${HOSTNAME}:${PWD}\007"
        tschwinge@flubber:~ $ ^C
        -bash: echo: write error: (ipc/mig) wrong reply message ID
        tschwinge@flubber:~ $ PROMPT_COMMAND=
        tschwinge@flubber:~ $ ^C
        tschwinge@flubber:~ $ 
