[[!meta copyright="Copyright Â© 2011 Free Software Foundation, Inc."]]

[[!meta license="""[[!toggle id="license" text="GFDL 1.2+"]][[!toggleable
id="license" text="Permission is granted to copy, distribute and/or modify this
document under the terms of the GNU Free Documentation License, Version 1.2 or
any later version published by the Free Software Foundation; with no Invariant
Sections, no Front-Cover Texts, and no Back-Cover Texts.  A copy of the license
is included in the section entitled [[GNU Free Documentation
License|/fdl]]."]]"""]]

[[!tag open_issue_glibc]]


# `sudo`

`sudo [task]` hands after finishing `[task]`.

IRC, freenode, #hurd, 2011-04-02

    <youpi> the sudo bug is select() not being able to get interrupted by
      signals

IRC, freenode, #hurd, 2012-01-05

    <youpi> it's a know issue in select
    <youpi> it's not interruptible by a SIGALRM for instance
    <youpi> which is what ntpdate uses
    <youpi> when __io_select is used, it *is* interruptible
    <youpi> but when __mach_msg is used, it is *not* interruptible
    <youpi> it happens that by luck, ntpdate uses just one fd, and thus it's __io_select which is used, and thus it gets an interruption after 1s (instead of after 60s, the timeout)
    <youpi> with braunr's patch, it's __mach_msg which is used to wait, and thus the interruption doesn't happen, and we have to wait  60s, the timeout...
    <youpi> so braunr's patch is still correct, it's the __mach_msg call which we do need to make interruptible (it was already on the todolist)

Proposed patch on http://cygwin.com/ml/libc-alpha/2013-01/msg00189.html

---

See also [[select]] and [[select_bogus_fd]].
